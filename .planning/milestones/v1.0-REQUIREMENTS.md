# Requirements: LibreRoaster v1.1 Cleanup

**Defined:** 2026-02-04
**Core Value:** Clean codebase with no dead code or warnings.

## v1 Requirements

### Code Removal

- [ ] **CLEAN-01**: Delete `output/serial.rs` (134 lines unused)
- [ ] **CLEAN-02**: Delete `output/uart.rs` (128 lines unused)
- [ ] **CLEAN-03**: Delete `output/manager.rs` (251 lines unused)
- [ ] **CLEAN-04**: Delete `output/scheduler.rs` (216 lines unused)
- [ ] **CLEAN-05**: Delete `control/command_handler.rs` (~50 lines unused)
- [ ] **CLEAN-06**: Delete `control/pid.rs` (~100 lines unused)
- [ ] **CLEAN-07**: Delete `control/abstractions_tests.rs` (180 lines orphaned)
- [ ] **CLEAN-08**: Remove unused exports from `output/mod.rs`
- [ ] **CLEAN-09**: Remove unused exports from `control/mod.rs`

### Trait Consolidation

- [ ] **CLEAN-10**: Remove OutputManager trait wrapper from `control/abstractions.rs`
- [ ] **CLEAN-11**: Remove OutputManager impl block for `output::OutputManager`

### Warning Fixes

- [ ] **CLEAN-12**: Remove unused import `alloc::string::String` in abstractions.rs
- [ ] **CLEAN-13**: Remove unused import `alloc::string::ToString` in abstractions.rs
- [ ] **CLEAN-14**: Remove unused import `UartDriver` in abstractions.rs
- [ ] **CLEAN-15**: Remove unused import `libreroaster::output::OutputFormatter` in abstractions.rs
- [ ] **CLEAN-16**: Remove unused `output_manager` field from `TemperatureCommandHandler`
- [ ] **CLEAN-17**: Remove unused `pid_controller` field from handlers if unused

### Cleanup

- [ ] **CLEAN-18**: Remove `application` module export from `lib.rs` (not needed in binary)
- [ ] **CLEAN-19**: Clean up commented code in serial.rs (if any)
- [ ] **CLEAN-20**: Verify lib.rs exports only needed modules

## Out of Scope

| Feature | Reason |
|---------|--------|
| Hardware testing | Actual ESP32 + roaster not available |
| New features | Pure cleanup, no functionality changes |
| Error handling refactor | Too risky for cleanup milestone |
| Test file removal | Test files in `tests/` directory are valid |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| CLEAN-01 to CLEAN-09 | Phase 1 | Pending |
| CLEAN-10 to CLEAN-11 | Phase 2 | Pending |
| CLEAN-12 to CLEAN-17 | Phase 3 | Pending |
| CLEAN-18 to CLEAN-20 | Phase 4 | Pending |

**Coverage:**
- v1 requirements: 20 total
- Mapped to phases: 20
- Pending: 20 (100%)

---

*Requirements defined: 2026-02-04 for v1.1 cleanup milestone*
