---
wave: 1
autonomy: full
depends_on: []
files_modified:
  - internalDoc/ARCHITECTURE.md
  - internalDoc/PROTOCOL.md
  - internalDoc/HARDWARE.md
  - internalDoc/DEVELOPMENT.md
---

# Plan: Fase 20 - Reorganizar internalDoc/

## Objetivo
Crear documentación técnica estructurada para desarrolladores en internalDoc/.

## Tareas

### Tarea 1: Auditoría de internalDoc existente

```bash
# Listar archivos existentes
ls -la internalDoc/

# Identificar contenido de cada archivo
head -20 internalDoc/*.md
```

**Criterios de verificación:**
- [ ] Lista de archivos existentes generada
- [ ] Contenido de cada archivo analizado

### Tarea 2: Crear internalDoc/ARCHITECTURE.md

**Secciones necesarias:**

| Sección | Contenido |
|---------|-----------|
| System Overview | Descripción general del sistema |
| Task Structure | Embassy tasks y sus responsabilidades |
| Async Model | Modelo async/await usado |
| Data Flow | Flujo de datos desde sensores hasta Artisan |
| Service Container | Patrón de inyección de dependencias |

**Referencia del código fuente:**

- `src/application/` → App architecture
- `src/hardware/` → Hardware drivers
- `src/control/` → Business logic
- `src/input/` → Command parsing
- `src/output/` → Artisan formatting

### Tarea 3: Crear internalDoc/PROTOCOL.md

**Secciones necesarias:**

| Sección | Contenido |
|---------|-----------|
| Command Reference | Todos los comandos Artisan implementados |
| Message Formats | Formato de READ response |
| Examples | Ejemplos de comandos y respuestas |
| Initialization | Secuencia CHAN→UNITS→FILT |
| Error Handling | Formato de mensajes de error |

**Referencia del código fuente:**

- `src/input/parser.rs` → Command parsing
- `src/input/multiplexer.rs` → Channel management
- `src/output/artisan.rs` → Response formatting
- `src/config/constants.rs` → ArtisanCommand enum

### Tarea 4: Crear internalDoc/HARDWARE.md

**Secciones necesarias:**

| Sección | Contenido |
|---------|-----------|
| Pinout Diagram | Tabla de asignaciones GPIO |
| Thermocouple Wiring | Conexiones MAX31856 |
| SSR Connections | Conexiones del relé de estado sólido |
| Fan Control | Control PWM del ventilador |
| Power Requirements | Requisitos de alimentación |

**Referencia del código fuente:**

- `src/hardware/max31856.rs` → MAX31856 driver
- `src/hardware/ssr.rs` → SSR control
- `src/hardware/fan.rs` → Fan control
- `src/config/constants.rs` → Pin assignments

### Tarea 5: Crear internalDoc/DEVELOPMENT.md

**Secciones necesarias:**

| Sección | Contenido |
|---------|-----------|
| Building | Comandos de compilación |
| Flashing | Comandos de flash |
| Testing | Ejecución de tests |
| Debugging | Monitoreo serial y solución de problemas |
| Project Structure | Descripción de directorios |

### Tarea 6: Mover/actualizar docs existentes

**Archivos existentes a reorganizar:**

| Archivo | Acción |
|---------|--------|
| `internalDoc/architecture-resume-gemini.md` | Consolidar en ARCHITECTURE.md |
| `internalDoc/FLASH_GUIDE.md` | Consolidar en DEVELOPMENT.md |
| `internalDoc/futureUpdates.md` | ¿Mantener o eliminar? |
| `internalDoc/hardware.md` | Consolidar en HARDWARE.md |

### Tarea 7: Limpieza final

```bash
# Verificar estructura final
ls -la internalDoc/

# Revisar enlaces internos si los hay
grep -r "\[" internalDoc/*.md | head -10
```

## must_haves

- [ ] internalDoc/ARCHITECTURE.md existe con system overview, task structure, async model
- [ ] internalDoc/PROTOCOL.md existe con command reference, message formats, examples
- [ ] internalDoc/HARDWARE.md existe con pinout, thermocouple wiring, SSR connections
- [ ] internalDoc/DEVELOPMENT.md existe con building, flashing, testing, debugging
- [ ] Docs existentes reorganizados/consolidados
- [ ] Documentación coherente y bien estructurada

## Dependencias

**Ninguna** — Esta fase es independiente.

## Notas de Implementación

- Usar Markdown estándar
- Mantener consistencia con README.md
- Incluir referencias al código fuente cuando sea apropiado
- Cada archivo debe ser autocontenido pero enlazar a otros cuando sea útil
