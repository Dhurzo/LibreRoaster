---
phase: 04-code-removal
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - src/output/serial.rs
  - src/output/uart.rs
  - src/output/manager.rs
  - src/output/scheduler.rs
  - src/output/mod.rs
autonomous: true
user_setup: []
must_haves:
  truths:
    - "Unused output modules no longer exist in the codebase"
    - "Output module exports are cleaned up in mod.rs"
    - "Project still compiles after deletion"
  artifacts:
    - path: src/output/serial.rs
      provides: "Deleted - was 134 unused lines"
    - path: src/output/uart.rs
      provides: "Deleted - was 128 unused lines"
    - path: src/output/manager.rs
      provides: "Deleted - was 251 unused lines"
    - path: src/output/scheduler.rs
      provides: "Deleted - was 216 unused lines"
  key_links:
    - from: src/output/mod.rs
      to: "Deleted modules"
      via: "Removed pub use statements for deleted modules"
---

<objective>
Delete 4 unused output modules identified in codebase analysis:
- serial.rs (134 lines) - SerialPrinter, never used
- uart.rs (128 lines) - UartPrinter, never used
- manager.rs (251 lines) - OutputManager, never used
- scheduler.rs (216 lines) - Schedulers, never used

Clean up module exports in output/mod.rs to reflect deletions.
</objective>

<execution_context>
@/home/juan/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/juan/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/PROJECT.md
@.planning/phases/04-code-removal/04-CONTEXT.md

# Code analysis confirming these modules are unused

## serial.rs
- Defined: SerialPrinter struct
- Usage in main.rs: NONE
- Usage in application/: NONE
- Usage in control/: NONE
- Verdict: NEVER INSTANTIATED

## uart.rs
- Defined: UartPrinter struct, UartChannel trait
- Usage in main.rs: NONE
- Usage in application/: NONE
- Verdict: NEVER INSTANTIATED

## manager.rs
- Defined: OutputManager struct
- Referenced by abstractions.rs wrapper impl
- Actual usage in main: NONE
- Verdict: DEFINED BUT NEVER USED

## scheduler.rs
- Defined: IntervalScheduler, AdaptiveScheduler
- Usage in manager.rs: only imported, not instantiated
- Usage in main: NONE
- Verdict: NEVER INSTANTIATED

All modules compile but are dead code - consuming ~700 lines with no path to usage.
</context>

<tasks>

<task type="auto">
  <name>Delete output/serial.rs</name>
  <files>src/output/serial.rs</files>
  <action>
    Delete the entire file src/output/serial.rs

    This file contains:
    - SerialPrinter struct
    - MockSerialPrinter for tests
    - DirectSerialPrinter (commented out)
    
    These are unused in the codebase.
  </action>
  <verify>
    ls src/output/serial.rs 2>&1 | grep -q "No such file" && echo "File deleted successfully" || echo "ERROR: File still exists"
  </verify>
  <done>
    src/output/serial.rs no longer exists
  </done>
</task>

<task type="auto">
  <name>Delete output/uart.rs</name>
  <files>src/output/uart.rs</files>
  <action>
    Delete the entire file src/output/uart.rs

    This file contains:
    - UartChannel trait
    - DefaultUartChannel struct
    - UartPrinter struct
    - UartPrinterBuilder
    - MockUartChannel for tests
    
    These are unused in the codebase.
  </action>
  <verify>
    ls src/output/uart.rs 2>&1 | grep -q "No such file" && echo "File deleted successfully" || echo "ERROR: File still exists"
  </verify>
  <done>
    src/output/uart.rs no longer exists
  </done>
</task>

<task type="auto">
  <name>Delete output/manager.rs</name>
  <files>src/output/manager.rs</files>
  <action>
    Delete the entire file src/output/manager.rs

    This file contains:
    - OutputManager struct
    - Implementation of process_status, reset, enable_continuous_output, disable_continuous_output
    
    This struct is defined but never instantiated in main.rs or application modules.
    It was only referenced by the wrapper trait impl in control/abstractions.rs.
  </action>
  <verify>
    ls src/output/manager.rs 2>&1 | grep -q "No such file" && echo "File deleted successfully" || echo "ERROR: File still exists"
  </verify>
  <done>
    src/output/manager.rs no longer exists
  </done>
</task>

<task type="auto">
  <name>Delete output/scheduler.rs</name>
  <files>src/output/scheduler.rs</files>
  <action>
    Delete the entire file src/output/scheduler.rs

    This file contains:
    - IntervalScheduler struct
    - AdaptiveScheduler struct
    - PrintScheduler trait implementations
    
    These schedulers are imported in manager.rs but never instantiated.
    The output system uses ArtisanFormatter directly without scheduling.
  </action>
  <verify>
    ls src/output/scheduler.rs 2>&1 | grep -q "No such file" && echo "File deleted successfully" || echo "ERROR: File still exists"
  </verify>
  <done>
    src/output/scheduler.rs no longer exists
  </done>
</task>

<task type="auto">
  <name>Clean up output/mod.rs exports</name>
  <files>src/output/mod.rs</files>
  <action>
    Update src/output/mod.rs to remove exports for deleted modules

    Remove or comment out these pub use statements:
    - pub use manager::{OutputConfig, OutputManager};
    - pub use scheduler::{AdaptiveScheduler, IntervalScheduler};
    - pub use serial::SerialPrinter;
    - pub use uart::UartPrinter;

    Keep only active exports:
    - pub mod artisan;
    - pub mod traits;
    - pub use artisan::{ArtisanFormatter, MutableArtisanFormatter};
    - pub use traits::{OutputError, OutputFormatter, PrintScheduler, SerialOutput};

    Also remove the now-unused module declarations:
    - pub mod manager;
    - pub mod scheduler;
    - pub mod serial;
    - pub mod uart;
  </action>
  <verify>
    grep -q "pub mod manager" src/output/mod.rs && echo "ERROR: manager still referenced" || echo "manager export removed"
    grep -q "pub mod scheduler" src/output/mod.rs && echo "ERROR: scheduler still referenced" || echo "scheduler export removed"
    grep -q "pub mod serial" src/output/mod.rs && echo "ERROR: serial still referenced" || echo "serial export removed"
    grep -q "pub mod uart" src/output/mod.rs && echo "ERROR: uart still referenced" || echo "uart export removed"
  </verify>
  <done>
    src/output/mod.rs exports only active modules (artisan, traits)
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Verify files deleted:
   ```bash
   ls src/output/{serial,uart,manager,scheduler}.rs 2>&1 | grep "No such file"
   ```

2. Verify mod.rs exports cleaned:
   ```bash
   grep "pub use\|pub mod" src/output/mod.rs
   ```

3. Verify project still compiles:
   ```bash
   cargo check 2>&1 | head -50
   ```

4. Verify no errors related to deleted modules
</verification>

<success_criteria>
- 4 unused output modules deleted (~700 lines)
- output/mod.rs exports cleaned
- cargo check succeeds with no errors
- No compilation warnings about missing modules
</success_criteria>

<output>
After completion, create `.planning/phases/04-code-removal/04-01-SUMMARY.md`
</output>
